<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pandora.lms.dao.AdminDAO">

	<select id="studentList" parameterType="ApplInfoDTO" resultType="ApplInfoDTO">
		SELECT *
		FROM APPL_INFO
		<where>
			<if test="KORN_FLNM != ''">
				KORN_FLNM LIKE CONCAT('%',#{KORN_FLNM},'%')
			</if>
			<if test="ACADEMIC_STATUS != ''">
				<choose>
					<when test="ACADEMIC_STATUS == '재학'">AND CRCLM_CYCL is not Null</when>
					<when test="ACADEMIC_STATUS == '휴학'">AND CRCLM_CYCL is Null</when>
				</choose>
			</if>
			<if test="CRCLM_CD != ''">
				AND CRCLM_CD LIKE CONCAT('%',#{CRCLM_CD},'%')
			</if>
		</where>
	</select>
	
	<select id="onlectList" parameterType="HashMap" resultType="HashMap">
		SELECT *
		FROM lectureview
		WHERE ON_LECT_NM LIKE CONCAT('%', IFNULL(#{ON_LECT_NM}, ''), '%')
		  AND KORN_FLNM LIKE CONCAT('%', IFNULL(#{ON_INSTR_NM}, ''), '%')
		  AND SBJCT_NM LIKE CONCAT('%', IFNULL(#{ON_SBJECT_NM}, ''), '%')
		  AND CRCLM_NM LIKE CONCAT('%', IFNULL(#{department_name}, ''), '%')
	</select>
	
<!-- 	<insert id="insertYoutube"> -->
<!-- 		INSERT INTO  -->
<!-- 	</insert> -->
	<select id="studentsModal" parameterType="ApplInfoDTO" resultType="ApplInfoDTO">
		SELECT *
		FROM APPL_INFO
		<where>
			<if test="KORN_FLNM != null">
				KORN_FLNM LIKE CONCAT('%',#{KORN_FLNM},'%')
			</if>
		</where>
	</select>
	
	<select id="departmentModal" parameterType="CrclmInfoDTO" resultType="CrclmInfoDTO">
		SELECT *
		FROM CRCLM_INFO
		<where>
			<if test="CRCLM_NM != null">
				CRCLM_NM LIKE CONCAT('%',#{CRCLM_NM},'%')
			</if>
		</where>
	</select>
	
	<select id="instructorModal" parameterType="InstrInfoDTO" resultType="InstrInfoDTO">
		SELECT *
		FROM INSTR_INFO
		<where>
			<if test="KORN_FLNM != null">
				KORN_FLNM LIKE CONCAT('%',#{KORN_FLNM},'%')
			</if>
		</where>
	</select>
</mapper>